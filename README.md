Το project μου αποτελείται από 8 αρχεία: logger.h, shared_mem.h, Makefile, closing.c, initializer.c, monitor.c, receptionist.c, visitor.c.

Το πρόγραμμα τρέχει με την εντολή make run ή (./initializer <visitors_num> <order_time> <rest_time>  <KEY>) και τερματίζει όταν εξυπηρετηθούν όλοι οι visitors και τρέχοντας το πρόγραμμα closing (./closing <key>) σε διαφορετικό terminal.

Δημιουργείτε και ένα txt αρχείο που περιέχει το logging με όνομα log.txt.


    • closing.c: Πρόγραμμα όπου μέσα από μια  μεταβλητή ενημερώνει τον receptionist ότι το μαγαζί κλείνει και δεν θα έρθουν άλλοι visitors στην ουρά. Οπότε από την στιγμή που θα τρέξει το πρόγραμμα (./closing <key>) και μετά, όσα visitors processes δεν έχουν μπει στην ουρά αναμονής (waiting buffer) θα τερματίζουν χωρίς να εξυπηρετηθούν γιατί το μπαρ κλείνει. Ο receptionist θα τερματίζει αφού δει ότι κλείνει το μπαρ και έχουν εξυπηρετηθεί όλοι οι πελάτες.
      
      
    •  Logger.h: Έχει μια συνάρτηση όπου καλείται όταν τρέχουν τα προγράμματα visitors, receptionist και εκτυπώνει στο αρχείο log.txt όλο το ιστορικό με τα γεγονότα που συνέβαιναν μαζί με τον χρόνο που συνέβησαν.

    • Makefile: make, make run, make clean.


    • shared_mem.h: Περιέχει τις δομές, μεταβλητές και σημαιοφόρους που βρίσκονται στην κοινή μνήμη και θα χρησιμοποιηθούν από τα προγράμματα.

    • Monitor.c: Πρόγραμμα όπου εκτυπώνει την κατάσταση στα τραπέζια και στις καρέκλες, δηλαδή ποιος κάθεται και αν είναι ελεύθερα ή όχι. Επίσης εκτυπώνει και τα στατιστικά μέχρι εκείνη την χρονική στιγμή. Το τρέχουμε σε διαφορετικό terminal με την εντολή (./monitor -s key)(όπως αναφέρεται στην εκφώνηση της εργασίας).
      
    • Initializer.c: Είναι το κύριο πρόγραμμα όπου αρχικά αρχικοποιεί τον αριθμό επισκεπτών που θα έρθουν δηλαδή πόσοι visitors θα δημιουργηθούν με fork, τον χρόνο όπου κάνει κάθε επισκέπτης να παραγγείλει και τον χρόνο όπου τρώει και μιλάει, και αυτοί οι χρόνοι περνιούνται ως όρισμα στο πρόγραμμα του receptionist και visitor όπως διευκρινίζεται και στην εκφώνηση. Μετά αρχικοποιεί όλες τις μεταβλητές και σημαιοφόρους που βρίσκονται στην κοινή μνήμη. Και τέλος, χρησιμοποιώντας fork(), βάσει τον αριθμό επισκεπτών που αρχικοποιήσαμε, δημιουργούνται τόσες διεργασίες επισκεπτών και μια διεργασία του receptionist.

    • receptionist.c: Αρχικά τσεκάρει αν υπάρχουν επισκέπτες στην ουρά αναμονής. Αν δεν υπάρχουν συνεχίζει να περιμένει μέχρι να εμφανιστεί κάποιος ή να εκτελεστεί το πρόγραμμα closing. Αν υπάρχουν πελάτες τσεκάρει αν υπάρχει διαθέσιμο τραπέζι, αν όχι περιμένει. Αλλιώς ψάχνει να βρει πιο από τα 3 τραπέζια είναι διαθέσιμο και αφού το βρει τοποθετεί τον επισκέπτη στο τραπέζι και στην καρέκλα. Αν υπάρχουν και άλλοι που περιμένουν, τους αναθέτει και αυτούς καρέκλες στο συγκεκριμένο τραπέζι μέχρι να γεμίσει το τραπέζι ή να μην υπάρχουν άλλοι να περιμένουν. Μετά πάει σε κάθε καρέκλα του τραπεζιού και παίρνει παραγγελία από κάθε επισκέπτη. Αφού πάρει από όλους τσεκάρει αν υπάρχουν άλλοι πελάτες που περιμένουν και αν το μαγαζί είναι έτοιμο να κλείσει. Αν εξυπηρετούνται και οι δύο συνθήκες περιμένει να αδιάσουν όλα τα τραπέζια και μετά εκτυπώνει τα στατιστικά και τερματίζει, αλλιώς συνεχίζει από την αρχή. 
      
      
    • visitor.c: Αρχικά όσοι επισκέπτες φτάσουν πρώτοι τοποθετούνται στην ουρά αναμονής αλλά αν δεν χωράνε, οι υπόλοιποι περιμένουν έξω μέχρι να αδειάσει η ουρά και να μπουν και αυτοί ή να φύγουν στην περίπτωση που κλείσει το μπαρ(Μπορούμε να ρυθμίσουμε αν θα τρέξουν όλα τα προγράμματα ταυτόχρονα ή αν θα τρέχουν μετά από ένα χρονικό διάστημα κάνοντας uncomment το sleep() στο πρόγραμμα intitializer.c ώστε οι επισκέπτες να φτάνουν όλοι ταυτόχρονα ή μετά από ένα τυχαίο χρονικό διάστημα(line 133)). Όταν τους αφήσει ο υπεύθυνος  να μπουν στο μπαρ, ψάχνουν να βρουν το τραπέζι και την καρέκλα που τους ανατέθηκε και όταν την βρουν περιμένουν εκεί μέχρι ο υπεύθυνος να έρθει να πάρει παραγγελία. Αφού τους πάρει, κάθονται λίγο και μετά αφού ενημερώσουν τα στατιστικά φεύγουν και το πρόγραμμα τερματίζει. (Μπορούμε να προσθέσουμε και επιπλέον επισκέπτες ανοίγοντας ένα νέο terminal και τρέχοντας το πρόγραμμα visitor.c όπως αναγράφεται στην εργασία).
